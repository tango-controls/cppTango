macro(TEST_SUITE_ADD_TEST test)
    message("Add test ${test}")
    add_executable(${test} ${test}.cpp)
    target_compile_definitions(${test} PUBLIC "-DVALGRIND -D_PTHREADS -D_REENTRANT")
#    target_include_directories(${test} PUBLIC ../cxxtest/include)
    target_link_libraries(${test} ${CMAKE_DL_LIBS} tango)
    add_test(NAME "${test}"  COMMAND $<TARGET_FILE:${test}>)
endmacro()

add_subdirectory(asyn)
add_subdirectory(event)
#add_subdirectory(old_tests)
add_subdirectory(new_tests)
add_subdirectory(cxxtest)